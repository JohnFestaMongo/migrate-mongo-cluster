

// db.adminCommand({flushRouterConfig: true})
// sh.stopBalancer
// double check the status 

// mongos> db.databases.find()
// { "_id" : "social", "primary" : "shard03", "partitioned" : true }
// mongos> db.collections.find()
// { "_id" : "social.people", "lastmodEpoch" : ObjectId("58efe1cbd0a3ecd9e541555b"), "lastmod" : ISODate("1970-02-19T17:02:47.296Z"), "dropped" : false, "key" : { "_id" : 1 }, "unique" : false }


// sh.startBalancer


// http://www.programcreek.com/java-api-examples/index.php?api=com.mongodb.client.MongoCursor


number of reader threads / workers 
each thread reads a collection in a batch of 100 
while reading each collection spin new batch of threads with id, startIndex, endIndex
for each reader, span a new writer 
use writer thread to write the batch of 100, order should not matter here 
wait for all workers to be completed 
 
rinse and repeat 

